{"metadata": {"source_language": "COBOL", "source_file": "CBL0001.cbl", "source_lines_of_code": 86, "target_framework": "SpringBoot", "analysis_timestamp": "2025-11-22T13:31:23.058123", "analyzer_version": "1.0.0-langgraph-cobol", "parser_type": "langgraph-cobol-subagent", "data_agent_confidence": 0.9, "logic_agent_confidence": 0.85, "io_agent_confidence": 0.893, "confidence": 0.878, "complexity": "medium", "subagents_used": ["cobol-data-agent", "cobol-logic-agent", "cobol-io-agent"]}, "data_structures": {"entities": [{"name": "PRINT-REC", "type": "record", "fields": [{"name": "ACCT-NO-O", "level": 5, "cobol_picture": "X(8)", "data_type": "String", "length": 8, "decimals": null, "default_value": null, "_line": 29, "_what": "Field ACCT-NO-O (String)"}, {"name": "ACCT-LIMIT-O", "level": 5, "cobol_picture": "$$,$$$,$$9", "data_type": "Integer", "length": 1, "decimals": null, "default_value": null, "_line": 30, "_what": "Field ACCT-LIMIT-O (Integer)"}, {"name": "ACCT-BALANCE-O", "level": 5, "cobol_picture": "$$,$$$,$$9", "data_type": "Integer", "length": 1, "decimals": null, "default_value": null, "_line": 31, "_what": "Field ACCT-BALANCE-O (Integer)"}, {"name": "LAST-NAME-O", "level": 5, "cobol_picture": "X(20)", "data_type": "String", "length": 20, "decimals": null, "default_value": null, "_line": 32, "_what": "Field LAST-NAME-O (String)"}, {"name": "FIRST-NAME-O", "level": 5, "cobol_picture": "X(15)", "data_type": "String", "length": 15, "decimals": null, "default_value": null, "_line": 33, "_what": "Field FIRST-NAME-O (String)"}, {"name": "COMMENTS-O", "level": 5, "cobol_picture": "X(50)", "data_type": "String", "length": 50, "decimals": null, "default_value": null, "_line": 34, "_what": "Field COMMENTS-O (String)"}], "source": "FILE SECTION", "_what": "Record layout for PRINT-REC"}, {"name": "ACCT-FIELDS", "type": "record", "fields": [{"name": "ACCT-NO", "level": 5, "cobol_picture": "X(8)", "data_type": "String", "length": 8, "decimals": null, "default_value": null, "_line": 38, "_what": "Field ACCT-NO (String)"}, {"name": "ACCT-LIMIT", "level": 5, "cobol_picture": "S9(7)V99", "data_type": "BigDecimal", "length": 9, "decimals": 2, "default_value": null, "_line": 39, "_what": "Field ACCT-LIMIT (BigDecimal)"}, {"name": "ACCT-BALANCE", "level": 5, "cobol_picture": "S9(7)V99", "data_type": "BigDecimal", "length": 9, "decimals": 2, "default_value": null, "_line": 40, "_what": "Field ACCT-BALANCE (BigDecimal)"}, {"name": "LAST-NAME", "level": 5, "cobol_picture": "X(20)", "data_type": "String", "length": 20, "decimals": null, "default_value": null, "_line": 41, "_what": "Field LAST-NAME (String)"}, {"name": "FIRST-NAME", "level": 5, "cobol_picture": "X(15)", "data_type": "String", "length": 15, "decimals": null, "default_value": null, "_line": 42, "_what": "Field FIRST-NAME (String)"}, {"name": "STREET-ADDR", "level": 10, "cobol_picture": "X(25)", "data_type": "String", "length": 25, "decimals": null, "default_value": null, "_line": 44, "_what": "Field STREET-ADDR (String)"}, {"name": "CITY-COUNTY", "level": 10, "cobol_picture": "X(20)", "data_type": "String", "length": 20, "decimals": null, "default_value": null, "_line": 45, "_what": "Field CITY-COUNTY (String)"}, {"name": "USA-STATE", "level": 10, "cobol_picture": "X(15)", "data_type": "String", "length": 15, "decimals": null, "default_value": null, "_line": 46, "_what": "Field USA-STATE (String)"}, {"name": "RESERVED", "level": 5, "cobol_picture": "X(7)", "data_type": "String", "length": 7, "decimals": null, "default_value": null, "_line": 47, "_what": "Field RESERVED (String)"}, {"name": "COMMENTS", "level": 5, "cobol_picture": "X(50)", "data_type": "String", "length": 50, "decimals": null, "default_value": null, "_line": 48, "_what": "Field COMMENTS (String)"}], "source": "FILE SECTION", "_what": "Record layout for ACCT-FIELDS"}, {"name": "FLAGS", "type": "variable", "fields": [{"name": "LASTREC", "level": 5, "cobol_picture": "X", "data_type": "String", "length": 1, "decimals": null, "default_value": "SPACE", "_line": 52, "_what": "Field LASTREC (String)"}], "source": "WORKING-STORAGE", "_what": "Variable FLAGS"}], "cobol_files": [{"select_name": "ACCT-REC", "_what": "File definition for ACCT-REC", "assign_to": "ACCTREC", "organization": "SEQUENTIAL", "access_mode": "SEQUENTIAL", "_select_line": 15, "record_layout": null, "file_status": null, "label_record": null, "value_of_file_id": null, "_fd_line": 36}, {"select_name": "PRINT-LINE", "_what": "File definition for PRINT-LINE", "assign_to": "PRTLINE", "organization": "SEQUENTIAL", "access_mode": "SEQUENTIAL", "_select_line": 14, "record_layout": null, "file_status": null, "label_record": null, "value_of_file_id": null, "_fd_line": 27}], "copybooks": [], "data_source": {"type": "sequential_file", "_what": "File-based (assumed sequential)"}}, "business_logic": {"procedures": [{"name": "OPEN-FILES", "type": "initialization", "_what": "Open files/connections", "logic_steps": [{"step_type": "data_operation", "description": "Open file ACCT-REC for INPUT", "operation": "OPEN", "file": "ACCT-REC", "mode": "INPUT", "code_snippet": "OPEN INPUT  ACCT-REC.", "_line": 57, "_spring_boot_equivalent": "Open database connection / file stream"}, {"step_type": "data_operation", "description": "Open file PRINT-LINE for OUTPUT", "operation": "OPEN", "file": "PRINT-LINE", "mode": "OUTPUT", "code_snippet": "OPEN OUTPUT PRINT-LINE.", "_line": 58, "_spring_boot_equivalent": "Open database connection / file stream"}, {"step_type": "other", "description": "*", "code_snippet": "*", "_line": 59}], "start_line": 56, "end_line": 59, "confidence": 0.9}, {"name": "READ-NEXT-RECORD", "type": "data_read", "_what": "Read data from file/database", "logic_steps": [{"step_type": "method_call", "description": "Call procedure READ-RECORD", "procedure": "READ-RECORD", "code_snippet": "PERFORM READ-RECORD", "_line": 61, "_spring_boot_equivalent": "READ-RECORD()"}, {"step_type": "loop", "description": "Loop UNTIL LASTREC = 'Y'", "loop_type": "UNTIL", "condition": "LASTREC = 'Y'", "code_snippet": "PERFORM UNTIL LASTREC = 'Y'", "_line": 62, "_spring_boot_equivalent": "while (!(LASTREC = 'Y')) { ... }"}, {"step_type": "method_call", "description": "Call procedure WRITE-RECORD", "procedure": "WRITE-RECORD", "code_snippet": "PERFORM WRITE-RECORD", "_line": 63, "_spring_boot_equivalent": "WRITE-RECORD()"}, {"step_type": "method_call", "description": "Call procedure READ-RECORD", "procedure": "READ-RECORD", "code_snippet": "PERFORM READ-RECORD", "_line": 64, "_spring_boot_equivalent": "READ-RECORD()"}, {"step_type": "other", "description": "END-PERFORM", "code_snippet": "END-PERFORM", "_line": 65}, {"step_type": "other", "description": ".", "code_snippet": ".", "_line": 66}, {"step_type": "other", "description": "*", "code_snippet": "*", "_line": 67}], "start_line": 60, "end_line": 67, "confidence": 0.9}, {"name": "CLOSE-STOP", "type": "cleanup", "_what": "Close files/connections and exit", "logic_steps": [{"step_type": "data_operation", "description": "Close file ACCT-REC", "operation": "CLOSE", "file": "ACCT-REC", "code_snippet": "CLOSE ACCT-REC.", "_line": 69, "_spring_boot_equivalent": "Close database connection / file stream"}, {"step_type": "data_operation", "description": "Close file PRINT-LINE", "operation": "CLOSE", "file": "PRINT-LINE", "code_snippet": "CLOSE PRINT-LINE.", "_line": 70, "_spring_boot_equivalent": "Close database connection / file stream"}], "start_line": 68, "end_line": 70, "confidence": 0.9}, {"name": "GOBACK", "type": "business_logic", "_what": "Business logic procedure", "logic_steps": [{"step_type": "other", "description": "*", "code_snippet": "*", "_line": 72}], "start_line": 71, "end_line": 72, "confidence": 0.9}, {"name": "READ-RECORD", "type": "data_read", "_what": "Read data from file/database", "logic_steps": [{"step_type": "data_operation", "description": "Read record from ACCT-REC", "operation": "READ", "file": "ACCT-REC", "has_at_end": false, "code_snippet": "READ ACCT-REC", "_line": 74, "_spring_boot_equivalent": "Read from database / file"}, {"step_type": "other", "description": "AT END MOVE 'Y' TO LASTREC", "code_snippet": "AT END MOVE 'Y' TO LASTREC", "_line": 75}], "start_line": 73, "end_line": 75, "confidence": 0.9}, {"name": "END-READ", "type": "data_read", "_what": "Read data from file/database", "logic_steps": [{"step_type": "other", "description": "*", "code_snippet": "*", "_line": 77}], "start_line": 76, "end_line": 77, "confidence": 0.9}, {"name": "WRITE-RECORD", "type": "data_write", "_what": "Write data to file/database", "logic_steps": [{"step_type": "data_transformation", "description": "Move ACCT-NO to ACCT-NO-O", "from_field": "ACCT-NO", "to_field": "ACCT-NO-O", "code_snippet": "MOVE ACCT-NO      TO  ACCT-NO-O.", "_line": 79, "_spring_boot_equivalent": "ACCT-NO-O = ACCT-NO"}, {"step_type": "data_transformation", "description": "Move ACCT-LIMIT to ACCT-LIMIT-O", "from_field": "ACCT-LIMIT", "to_field": "ACCT-LIMIT-O", "code_snippet": "MOVE ACCT-LIMIT   TO  ACCT-LIMIT-O.", "_line": 80, "_spring_boot_equivalent": "ACCT-LIMIT-O = ACCT-LIMIT"}, {"step_type": "data_transformation", "description": "Move ACCT-BALANCE to ACCT-BALANCE-O", "from_field": "ACCT-BALANCE", "to_field": "ACCT-BALANCE-O", "code_snippet": "MOVE ACCT-BALANCE TO  ACCT-BALANCE-O.", "_line": 81, "_spring_boot_equivalent": "ACCT-BALANCE-O = ACCT-BALANCE"}, {"step_type": "data_transformation", "description": "Move LAST-NAME to LAST-NAME-O", "from_field": "LAST-NAME", "to_field": "LAST-NAME-O", "code_snippet": "MOVE LAST-NAME    TO  LAST-NAME-O.", "_line": 82, "_spring_boot_equivalent": "LAST-NAME-O = LAST-NAME"}, {"step_type": "data_transformation", "description": "Move FIRST-NAME to FIRST-NAME-O", "from_field": "FIRST-NAME", "to_field": "FIRST-NAME-O", "code_snippet": "MOVE FIRST-NAME   TO  FIRST-NAME-O.", "_line": 83, "_spring_boot_equivalent": "FIRST-NAME-O = FIRST-NAME"}, {"step_type": "data_transformation", "description": "Move COMMENTS to COMMENTS-O", "from_field": "COMMENTS", "to_field": "COMMENTS-O", "code_snippet": "MOVE COMMENTS     TO  COMMENTS-O.", "_line": 84, "_spring_boot_equivalent": "COMMENTS-O = COMMENTS"}, {"step_type": "data_operation", "description": "Write record PRINT-REC", "operation": "WRITE", "record": "PRINT-REC", "code_snippet": "WRITE PRINT-REC.", "_line": 85, "_spring_boot_equivalent": "Insert into database / write to file"}], "start_line": 78, "end_line": 85, "confidence": 0.9}], "workflows": [], "calculations": [], "error_handling": [{"type": "at_end_clause", "scope": "File I/O", "handler": "AT END MOVE 'Y' TO LASTREC", "_line": 75, "_what": "End-of-file handling", "_spring_boot_equivalent": "Exception handling or null check"}]}, "io_operations": {"operations": [{"type": "OPEN", "entity": "ACCT-REC", "mode": "INPUT", "procedure": "OPEN-FILES", "_line": 57, "_what": "Open ACCT-REC for INPUT", "_spring_boot": "Repository read operations (SELECT)", "confidence": 0.95}, {"type": "OPEN", "entity": "PRINT-LINE", "mode": "OUTPUT", "procedure": "OPEN-FILES", "_line": 58, "_what": "Open PRINT-LINE for OUTPUT", "_spring_boot": "Repository write operations (INSERT)", "confidence": 0.95}, {"type": "CLOSE", "entity": "ACCT-REC", "procedure": "CLOSE-STOP", "_line": 69, "_what": "Close ACCT-REC", "_spring_boot": "Transaction commit / resource cleanup", "confidence": 0.95}, {"type": "CLOSE", "entity": "PRINT-LINE", "procedure": "CLOSE-STOP", "_line": 70, "_what": "Close PRINT-LINE", "_spring_boot": "Transaction commit / resource cleanup", "confidence": 0.95}, {"type": "READ", "entity": "ACCT-REC", "into_variable": null, "access_pattern": "SEQUENTIAL", "key_field": null, "error_handling": null, "procedure": "READ-RECORD", "_line": 74, "_what": "Read record from ACCT-REC", "_spring_boot": "findAll() with iterator", "confidence": 0.9}, {"type": "WRITE", "entity": "PRINT-REC", "from_variable": null, "is_print": false, "procedure": "WRITE-RECORD", "_line": 85, "_what": "Write record PRINT-REC", "_spring_boot": "repository.save(entity) or INSERT", "confidence": 0.9}], "io_patterns": [{"pattern_type": "SEQUENTIAL_WRITE", "pattern_name": "Sequential File Write", "_what": "Write records to output file", "_spring_boot": "repository.saveAll() or batch insert", "confidence": 0.9}], "repository_recommendations": [{"entity": "ACCT-REC", "repository_type": "ReadOnlyRepository or @Query methods", "operations_needed": ["CLOSE", "OPEN", "READ"], "_what": "Repository for ACCT-REC", "_spring_boot_interface": "public interface ACCT-RECRepository extends ReadOnlyRepository or @Query methods<ACCT-REC, Long>", "confidence": 0.85}, {"entity": "PRINT-LINE", "repository_type": "JpaRepository", "operations_needed": ["CLOSE", "OPEN"], "_what": "Repository for PRINT-LINE", "_spring_boot_interface": "public interface PRINT-LINERepository extends JpaRepository<PRINT-LINE, Long>", "confidence": 0.85}, {"entity": "PRINT-REC", "repository_type": "JpaRepository", "operations_needed": ["WRITE"], "_what": "Repository for PRINT-REC", "_spring_boot_interface": "public interface PRINT-RECRepository extends JpaRepository<PRINT-REC, Long>", "confidence": 0.85}], "file_status_handling": []}, "patterns": [{"pattern_type": "SEQUENTIAL_WRITE", "pattern_name": "Sequential File Write", "_what": "Write records to output file", "_spring_boot": "repository.saveAll() or batch insert", "confidence": 0.9}], "external_references": {"classes": [], "modules": [], "copybooks": [], "controls": []}, "security_issues": [], "generation_metadata": {"estimated_automation_rate": 0.9, "estimated_manual_effort_hours": 4.6, "complexity_score": 4, "recommended_template": "spring-boot-service", "generation_notes": ["Generate 3 @Entity class(es)", "Generate 3 JPA Repository interface(s)", "Generate 7 @Service method(s)", "Use JPA for database operations (replace file I/O)", "Use @Transactional for data consistency"]}}