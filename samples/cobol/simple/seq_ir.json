{"metadata": {"source_language": "COBOL", "source_file": "seq.cbl", "source_lines_of_code": 56, "target_framework": "SpringBoot", "analysis_timestamp": "2025-11-22T13:31:16.583105", "analyzer_version": "1.0.0-langgraph-cobol", "parser_type": "langgraph-cobol-subagent", "data_agent_confidence": 0.875, "logic_agent_confidence": 0.838, "io_agent_confidence": 0.913, "confidence": 0.872, "complexity": "medium", "subagents_used": ["cobol-data-agent", "cobol-logic-agent", "cobol-io-agent"]}, "data_structures": {"entities": [{"name": "DiagDetails", "type": "record", "fields": [{"name": "DiagCode", "level": 2, "cobol_picture": "X(5)", "data_type": "String", "length": 5, "decimals": null, "default_value": null, "_line": 20, "_what": "Field DiagCode (String)"}, {"name": "DiagName", "level": 2, "cobol_picture": "X(70)", "data_type": "String", "length": 70, "decimals": null, "default_value": null, "_line": 21, "_what": "Field DiagName (String)"}], "source": "FILE SECTION", "_what": "Record layout for DiagDetails"}, {"name": "READ-EOF", "type": "variable", "fields": [{"name": "READ-EOF", "level": 1, "cobol_picture": "9", "data_type": "Integer", "length": 1, "decimals": null, "default_value": "0", "_line": 24, "_what": "Field READ-EOF (Integer)"}], "source": "WORKING-STORAGE", "_what": "Variable READ-EOF"}], "cobol_files": [{"select_name": "DIAG-FILE", "_what": "File definition for DIAG-FILE", "assign_to": "DISK", "organization": "SEQUENTIAL", "access_mode": "SEQUENTIAL", "_select_line": 9, "record_layout": "DiagDetails", "file_status": null, "label_record": "STANDARD", "value_of_file_id": "DIAG.DAT", "_fd_line": 14}], "copybooks": [], "data_source": {"type": "sequential_file", "_what": "Sequential flat files"}}, "business_logic": {"procedures": [{"name": "p000-Begin", "type": "initialization", "_what": "Initialize program/process", "logic_steps": [{"step_type": "data_operation", "description": "Open file DIAG-FILE for OUTPUT", "operation": "OPEN", "file": "DIAG-FILE", "mode": "OUTPUT", "code_snippet": "OPEN OUTPUT DIAG-FILE.", "_line": 31, "_spring_boot_equivalent": "Open database connection / file stream"}, {"step_type": "data_transformation", "description": "Move \"J01\" to DiagCode", "from_field": "\"J01\"", "to_field": "DiagCode", "code_snippet": "MOVE \"J01\" TO DiagCode.", "_line": 32, "_spring_boot_equivalent": "DiagCode = \"J01\""}, {"step_type": "data_transformation", "description": "Move \"Acute sinusitis\" to DiagName", "from_field": "\"Acute sinusitis\"", "to_field": "DiagName", "code_snippet": "MOVE \"Acute sinusitis\" TO DiagName.", "_line": 33, "_spring_boot_equivalent": "DiagName = \"Acute sinusitis\""}, {"step_type": "data_operation", "description": "Write record DiagDetails", "operation": "WRITE", "record": "DiagDetails", "code_snippet": "WRITE DiagDetails.", "_line": 34, "_spring_boot_equivalent": "Insert into database / write to file"}, {"step_type": "data_transformation", "description": "Move \"J03  Acute tonsillitis\" to DiagDetails", "from_field": "\"J03  Acute tonsillitis\"", "to_field": "DiagDetails", "code_snippet": "MOVE \"J03  Acute tonsillitis\" TO DiagDetails.", "_line": 35, "_spring_boot_equivalent": "DiagDetails = \"J03  Acute tonsillitis\""}, {"step_type": "data_operation", "description": "Write record DiagDetails", "operation": "WRITE", "record": "DiagDetails", "code_snippet": "WRITE DiagDetails.", "_line": 36, "_spring_boot_equivalent": "Insert into database / write to file"}, {"step_type": "data_transformation", "description": "Move \"J00  Acute nasopharyngitis\" to DiagDetails", "from_field": "\"J00  Acute nasopharyngitis\"", "to_field": "DiagDetails", "code_snippet": "MOVE \"J00  Acute nasopharyngitis\" TO DiagDetails.", "_line": 37, "_spring_boot_equivalent": "DiagDetails = \"J00  Acute nasopharyngitis\""}, {"step_type": "data_operation", "description": "Write record DiagDetails", "operation": "WRITE", "record": "DiagDetails", "code_snippet": "WRITE DiagDetails.", "_line": 38, "_spring_boot_equivalent": "Insert into database / write to file"}, {"step_type": "data_operation", "description": "Close file DIAG-FILE", "operation": "CLOSE", "file": "DIAG-FILE", "code_snippet": "CLOSE DIAG-FILE.", "_line": 39, "_spring_boot_equivalent": "Close database connection / file stream"}, {"step_type": "other", "description": "* Read data back", "code_snippet": "* Read data back", "_line": 41}, {"step_type": "message", "description": "Display: \"Code  Name\"", "output": "\"Code  Name\"", "code_snippet": "DISPLAY \"Code  Name\".", "_line": 42, "_spring_boot_equivalent": "System.out.println(\"Code  Name\")"}, {"step_type": "data_transformation", "description": "Move 0 to READ-EOF", "from_field": "0", "to_field": "READ-EOF", "code_snippet": "MOVE 0 TO READ-EOF", "_line": 43, "_spring_boot_equivalent": "READ-EOF = 0"}, {"step_type": "data_operation", "description": "Open file DIAG-FILE for INPUT", "operation": "OPEN", "file": "DIAG-FILE", "mode": "INPUT", "code_snippet": "OPEN INPUT DIAG-FILE.", "_line": 44, "_spring_boot_equivalent": "Open database connection / file stream"}, {"step_type": "loop", "description": "Loop: PERFORM p300-ReadItem UNTIL IS-EOF", "loop_type": "UNTIL", "procedure": "p300-ReadItem", "condition": "IS-EOF", "code_snippet": "PERFORM p300-ReadItem UNTIL IS-EOF", "_line": 45, "_spring_boot_equivalent": "while (!(IS-EOF)) { p300-ReadItem() }"}, {"step_type": "data_operation", "description": "Close file DIAG-FILE", "operation": "CLOSE", "file": "DIAG-FILE", "code_snippet": "CLOSE DIAG-FILE.", "_line": 46, "_spring_boot_equivalent": "Close database connection / file stream"}, {"step_type": "navigation", "description": "Exit program", "code_snippet": "STOP RUN.", "_line": 47, "_spring_boot_equivalent": "return / System.exit()"}], "start_line": 29, "end_line": 47, "confidence": 0.9}, {"name": "p300-ReadItem", "type": "data_read", "_what": "Read data from file/database", "logic_steps": [{"step_type": "data_operation", "description": "Read record from DIAG-FILE", "operation": "READ", "file": "DIAG-FILE", "has_at_end": false, "code_snippet": "READ DIAG-FILE", "_line": 50, "_spring_boot_equivalent": "Read from database / file"}, {"step_type": "other", "description": "AT END MOVE 1 TO READ-EOF.", "code_snippet": "AT END MOVE 1 TO READ-EOF.", "_line": 51}, {"step_type": "conditional", "description": "IF NOT IS-EOF", "condition": "NOT IS-EOF", "code_snippet": "IF NOT IS-EOF", "_line": 52, "_spring_boot_equivalent": "if (NOT IS-EOF) { ... }"}, {"step_type": "message", "description": "Display: DiagCode \" \" DiagName", "output": "DiagCode \" \" DiagName", "code_snippet": "DISPLAY DiagCode \" \" DiagName", "_line": 53, "_spring_boot_equivalent": "System.out.println(DiagCode \" \" DiagName)"}, {"step_type": "other", "description": "ELSE", "code_snippet": "ELSE", "_line": 54}, {"step_type": "message", "description": "Display: \"*** End of file ***\"", "output": "\"*** End of file ***\"", "code_snippet": "DISPLAY \"*** End of file ***\".", "_line": 55, "_spring_boot_equivalent": "System.out.println(\"*** End of file ***\")"}], "start_line": 49, "end_line": 55, "confidence": 0.9}], "workflows": [{"name": "main_program_flow", "entry_point": "p000-Begin", "_what": "Main program workflow", "procedures_called": ["p300-ReadItem"], "confidence": 0.85}], "calculations": [], "error_handling": [{"type": "at_end_clause", "scope": "File I/O", "handler": "AT END MOVE 1 TO READ-EOF.", "_line": 51, "_what": "End-of-file handling", "_spring_boot_equivalent": "Exception handling or null check"}]}, "io_operations": {"operations": [{"type": "OPEN", "entity": "DIAG-FILE", "mode": "OUTPUT", "procedure": "p000-Begin", "_line": 31, "_what": "Open DIAG-FILE for OUTPUT", "_spring_boot": "Repository write operations (INSERT)", "confidence": 0.95}, {"type": "WRITE", "entity": "DiagDetails", "from_variable": null, "is_print": false, "procedure": "p000-Begin", "_line": 34, "_what": "Write record DiagDetails", "_spring_boot": "repository.save(entity) or INSERT", "confidence": 0.9}, {"type": "WRITE", "entity": "DiagDetails", "from_variable": null, "is_print": false, "procedure": "p000-Begin", "_line": 36, "_what": "Write record DiagDetails", "_spring_boot": "repository.save(entity) or INSERT", "confidence": 0.9}, {"type": "WRITE", "entity": "DiagDetails", "from_variable": null, "is_print": false, "procedure": "p000-Begin", "_line": 38, "_what": "Write record DiagDetails", "_spring_boot": "repository.save(entity) or INSERT", "confidence": 0.9}, {"type": "CLOSE", "entity": "DIAG-FILE", "procedure": "p000-Begin", "_line": 39, "_what": "Close DIAG-FILE", "_spring_boot": "Transaction commit / resource cleanup", "confidence": 0.95}, {"type": "OPEN", "entity": "DIAG-FILE", "mode": "INPUT", "procedure": "p000-Begin", "_line": 44, "_what": "Open DIAG-FILE for INPUT", "_spring_boot": "Repository read operations (SELECT)", "confidence": 0.95}, {"type": "CLOSE", "entity": "DIAG-FILE", "procedure": "p000-Begin", "_line": 46, "_what": "Close DIAG-FILE", "_spring_boot": "Transaction commit / resource cleanup", "confidence": 0.95}, {"type": "READ", "entity": "DIAG-FILE", "into_variable": null, "access_pattern": "SEQUENTIAL", "key_field": null, "error_handling": null, "procedure": "p300-ReadItem", "_line": 50, "_what": "Read record from DIAG-FILE", "_spring_boot": "findAll() with iterator", "confidence": 0.9}], "io_patterns": [{"pattern_type": "SEQUENTIAL_WRITE", "pattern_name": "Sequential File Write", "_what": "Write records to output file", "_spring_boot": "repository.saveAll() or batch insert", "confidence": 0.9}], "repository_recommendations": [{"entity": "DIAG-FILE", "repository_type": "ReadOnlyRepository or @Query methods", "operations_needed": ["CLOSE", "OPEN", "READ"], "_what": "Repository for DIAG-FILE", "_spring_boot_interface": "public interface DIAG-FILERepository extends ReadOnlyRepository or @Query methods<DIAG-FILE, Long>", "confidence": 0.85}, {"entity": "DiagDetails", "repository_type": "JpaRepository", "operations_needed": ["WRITE"], "_what": "Repository for DiagDetails", "_spring_boot_interface": "public interface DiagDetailsRepository extends JpaRepository<DiagDetails, Long>", "confidence": 0.85}], "file_status_handling": []}, "patterns": [{"pattern_type": "SEQUENTIAL_WRITE", "pattern_name": "Sequential File Write", "_what": "Write records to output file", "_spring_boot": "repository.saveAll() or batch insert", "confidence": 0.9}], "external_references": {"classes": [], "modules": [], "copybooks": [], "controls": []}, "security_issues": [], "generation_metadata": {"estimated_automation_rate": 0.9, "estimated_manual_effort_hours": 2.6, "complexity_score": 2, "recommended_template": "spring-boot-service", "generation_notes": ["Generate 2 @Entity class(es)", "Generate 2 JPA Repository interface(s)", "Generate 2 @Service method(s)", "Use JPA for database operations (replace file I/O)", "Use @Transactional for data consistency"]}}